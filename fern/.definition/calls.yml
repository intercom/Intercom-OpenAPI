imports:
  root: __package__.yml
types:
  Call:
    docs: Represents a phone call in Intercom
    properties:
      admin_id:
        docs: The id of the admin associated with the call, if any.
        type: optional<string>
      answered_at:
        type: optional<root.Datetime>
      call_type:
        docs: The type of call.
        type: optional<string>
      contact_id:
        docs: The id of the contact associated with the call, if any.
        type: optional<string>
      conversation_id:
        docs: The id of the conversation associated with the call, if any.
        type: optional<string>
      created_at:
        type: optional<root.Datetime>
      direction:
        docs: The direction of the call.
        type: optional<string>
      ended_at:
        type: optional<root.Datetime>
      ended_reason:
        docs: The reason for the call end, if applicable.
        type: optional<string>
      fin_recording_url:
        docs: API URL to the AI Agent (Fin) call recording if available.
        type: optional<string>
        validation:
          format: uri
      fin_transcription_url:
        docs: API URL to the AI Agent (Fin) call transcript if available.
        type: optional<string>
        validation:
          format: uri
      id:
        docs: The id of the call.
        type: optional<string>
      initiated_at:
        type: optional<root.Datetime>
      phone:
        docs: The phone number involved in the call, in E.164 format.
        type: optional<string>
      recording_url:
        docs: API URL to download or redirect to the call recording if available.
        type: optional<string>
        validation:
          format: uri
      state:
        docs: The current state of the call.
        type: optional<string>
      type:
        docs: String representing the object's type. Always has the value `call`.
        type: optional<string>
      updated_at:
        type: optional<root.Datetime>
    source:
      openapi: ../descriptions/2.14/api.intercom.io.yaml
  ListCallsWithTranscriptsResponse:
    properties:
      data: optional<list<ListCallsWithTranscriptsResponseDataItem>>
      type: optional<string>
    source:
      openapi: ../descriptions/2.14/api.intercom.io.yaml
  ListCallsWithTranscriptsResponseDataItem:
    extends:
      - Call
    inline: true
    properties:
      transcript:
        docs: The call transcript if available, otherwise an empty array.
        type: optional<list<map<string, unknown>>>
      transcript_status:
        docs: The status of the transcript if available.
        type: optional<string>
    source:
      openapi: ../descriptions/2.14/api.intercom.io.yaml
service:
  auth: false
  base-path: ''
  endpoints:
    listCalls:
      auth: true
      display-name: List all calls
      docs: |
        Retrieve a paginated list of calls.
      errors:
        - root.UnauthorizedError
      examples:
        - name: successful
          response:
            body:
              data:
                - admin_id: '789'
                  answered_at: '2024-01-15T09:30:00Z'
                  call_type: phone
                  contact_id: 6762f0dd1bb69f9f2193bb83
                  conversation_id: '456'
                  created_at: '2024-01-15T09:30:00Z'
                  direction: outbound
                  ended_at: '2024-01-15T09:30:00Z'
                  ended_reason: completed
                  fin_recording_url: fin_recording_url
                  fin_transcription_url: fin_transcription_url
                  id: '123'
                  initiated_at: '2024-01-15T09:30:00Z'
                  phone: '+15551234567'
                  recording_url: https://api.intercom.io/calls/123/recording
                  state: completed
                  type: call
                  updated_at: '2024-01-15T09:30:00Z'
              pages:
                next:
                  per_page: 2
                  starting_after: your-cursor-from-response
                page: 1
                per_page: 25
                total_pages: 0
                type: pages
              total_count: 0
              type: list
      method: GET
      path: /calls
      request:
        name: ListCallsRequest
        query-parameters:
          page:
            docs: The page of results to fetch. Defaults to first page
            type: optional<integer>
          per_page:
            docs: How many results to display per page. Defaults to 25. Max 25.
            type: optional<integer>
      response:
        docs: successful
        status-code: 200
        type: root.CallList
      source:
        openapi: ../descriptions/2.14/api.intercom.io.yaml
    listCallsWithTranscripts:
      auth: true
      display-name: List calls with transcripts
      docs: >
        Retrieve calls by a list of conversation ids and include transcripts
        when available.

        A maximum of 20 `conversation_ids` can be provided. If none are provided
        or more than 20 are provided, a 400 error is returned.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
      examples:
        - name: successful
          request:
            conversation_ids:
              - '64619700005694'
              - '64619700005695'
          response:
            body:
              data:
                - admin_id: '789'
                  answered_at: '2024-01-15T09:30:00Z'
                  call_type: phone
                  contact_id: 6762f0dd1bb69f9f2193bb83
                  conversation_id: '64619700005694'
                  created_at: '2024-01-15T09:30:00Z'
                  direction: outbound
                  ended_at: '2024-01-15T09:30:00Z'
                  ended_reason: completed
                  fin_recording_url: fin_recording_url
                  fin_transcription_url: fin_transcription_url
                  id: '123'
                  initiated_at: '2024-01-15T09:30:00Z'
                  phone: '+15551234567'
                  recording_url: https://api.intercom.io/calls/123/recording
                  state: completed
                  transcript:
                    - key: value
                  transcript_status: completed
                  type: call
                  updated_at: '2024-01-15T09:30:00Z'
              type: list
      method: POST
      path: /calls/search
      request:
        body:
          properties:
            conversation_ids:
              docs: A list of conversation ids to fetch calls for. Maximum 20.
              type: list<string>
        content-type: application/json
        name: ListCallsWithTranscriptsRequest
      response:
        docs: successful
        status-code: 200
        type: ListCallsWithTranscriptsResponse
      source:
        openapi: ../descriptions/2.14/api.intercom.io.yaml
    showCall:
      auth: true
      display-name: Get a call
      docs: Retrieve a single call by id.
      errors:
        - root.UnauthorizedError
        - root.NotFoundError
      examples:
        - name: successful
          path-parameters:
            id: id
          response:
            body:
              admin_id: '789'
              answered_at: 1734537440
              call_type: phone
              contact_id: 6762f0dd1bb69f9f2193bb83
              conversation_id: '456'
              created_at: 1734537437
              direction: outbound
              ended_at: 1734537530
              ended_reason: answered
              fin_recording_url: https://api.intercom.io/calls/124/recording
              fin_transcription_url: https://api.intercom.io/calls/124/transcript
              id: '123'
              initiated_at: 1734537437
              phone: '+15551234567'
              recording_url: https://api.intercom.io/calls/123/recording
              state: completed
              type: call
              updated_at: 1734537531
      method: GET
      path: /calls/{id}
      request:
        name: ShowCallRequest
        path-parameters:
          id:
            docs: The id of the call to retrieve
            type: string
      response:
        docs: successful
        status-code: 200
        type: Call
      source:
        openapi: ../descriptions/2.14/api.intercom.io.yaml
    showCallRecording:
      auth: true
      display-name: Get call recording by call id
      docs: Redirects to a signed URL for the call's recording if it exists.
      errors:
        - root.UnauthorizedError
        - root.NotFoundError
      examples:
        - path-parameters:
            id: id
      method: GET
      path: /calls/{id}/recording
      request:
        name: ShowCallRecordingRequest
        path-parameters:
          id:
            docs: The id of the call
            type: string
      source:
        openapi: ../descriptions/2.14/api.intercom.io.yaml
    showCallTranscript:
      auth: true
      display-name: Get call transcript by call id
      docs: >
        Returns the transcript for the specified call as a downloadable text
        file.
      errors:
        - root.NotFoundError
      method: GET
      path: /calls/{id}/transcript
      request:
        name: ShowCallTranscriptRequest
        path-parameters:
          id:
            docs: The id of the call
            type: string
      response:
        docs: successful
        status-code: 200
        type: text
      source:
        openapi: ../descriptions/2.14/api.intercom.io.yaml
  source:
    openapi: ../descriptions/2.14/api.intercom.io.yaml
